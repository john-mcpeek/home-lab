## template: jinja
#Cloud-config
merge_how:
  - name: list
    settings: [ append ]
  - name: dict
    settings: [ no_replace, recurse_list ]

hostname: ${HOST_NAME}

package_update: true
package_upgrade: true
package_reboot_if_required: true

runcmd:
  - swapoff -a
  - systemctl mask swap.img.swap

  # sysctl params required by setup, params persist across reboots
  - echo "net.ipv4.ip_forward = 1" | tee /etc/sysctl.d/k8s.conf
  # Apply sysctl params without a reboot
  - sysctl --system
